<!DOCTYPE html>
<html>
	<head>
		<style>
			canvas
			{
				border:1px solid #d3d3d3;
				background-color: #42ff64;
			}
		</style>
	</head>

	<body onload="">
		<script>

			var wingoal = 1000;
			var dmgdiff = 0;

			var bossex =1;
			var bossamp=1;
			var stdex=1;
			var stdamp=1;
			var time=0;
			var boss_tempmod = 1;
			var stud_tempmod = 1;
			var stun = 1;

			var item_13_check = 0;
			var item_14_check = 0;

			var healthbar = {
				canvas : document.createElement("canvas"),
				start : function() {
					this.canvas.width = 480;
					this.canvas.height = 50;
					this.context = this.canvas.getContext("2d");
					document.body.insertBefore(this.canvas, document.body.childNodes[0]);
					bosshp = new component(480,50,"red",-240,0);
				}

			}

			healthbar.start();

			function component(width, height, color, x, y, type)
			{
				this.type = type;
				this.score = 0;
				this.width = 480;
				this.height = 50;
				this.speedX = 0;
				this.speedY = 0;
				this.x = x;
				this.y = y;
				this.update = function() {
					ctx = healthbar.context;
					if (this.type == "text") {
						ctx.font = this.width + " " + this.height;
						ctx.fillStyle = color;
						ctx.fillText(this.text, this.x, this.y);
					} else {
						this.x = gethpx();
						ctx.fillStyle = "#42ff64";
						ctx.fillRect(0,0,480,50);
						ctx.fillStyle = color;
						ctx.fillRect(0, 0, this.width, this.height);
					}

				}
			}

			bosshp.update();

			function bossdmg(damage)
			{
				dmgdiff -= damage;
				bosshp.update();
				console.log(bosshp.x);
			}

			function studentdmg(damage)
			{
				dmgdiff += damage;
				bosshp.update();
				console.log(bosshp.x);
			}

			function gethpx()
			{
				var x = 480*(dmgdiff+wingoal)/(wingoal*2);
				return x-1480;
			}

			function boss_attack_p1()
			{
				(150+bossex)*1;
			}

			function timer()
			{
				time+=1;
			}

			function stun_boss(seconds)
			{
				stun = seconds;
				stundur = setInterval(function(){stun_countdown();},1000);

			}

			function stun_countdown()
			{
				stun-=1;
				if(stun==0)
				{
					clearInterval(stundur);
				}
			}

			setInterval(function(){timer();},1000);

			function manual_atk(dmg)
			{
				dmgdiff -= dmg;
				if (item_13_check == 1)
				{
					stdex += 0.5;
				}
				if (item_14_check == 1)
				{
					stdadd += 0.1;
				}
			}

			function item_main_1 ()
			{
				stun_boss(5);
			}

			function item_main_3 ()
			{
				stdex += 20;
			}

			function item_main_4 ()
			{
				dmg = getdpss() * 5;
				dmgdiff = dmgdiff - dmg;
			}

			function item_extra_1 ()
			{
				bossamp = bossamp*0.95;
			}

			function item_extra_2 ()
			{
				stdamp = stdamp * 1.05;
			}

			function item_extra_3 ()
			{
				time = time/1.25;
				tincrement = tincrement/1.25;
			}

			function item_extra_4 ()
			{

			}

			function item_extra_6 ()
			{
				stdex += 100;
			}

			function item_extra_7 ()
			{
				if (bossphase == 1)
				{
					dmg = getdpsb1()*0.75;
				}
				else {
					dmg = getdpsb2()*0.75;
				}
				dmgdiff = dmgdiff - dmg;
			}

			function bstcountdown_std()
			{
				booster_countdown -= 1;
				if(booster_countdown == 0)
				{
					clearInterval(a);
					stud_tempmod /= 2;
				}
			}

			function item_extra_8 ()
			{
				stud_tempmod *= 2;
				booster_countdown = 60;
				a = setInterval(function(){bstcountdown_std()},1000);
			}

			function bstcountdown_boss()
			{
				booster_countdown -= 1;
				if(booster_countdown == 0)
				{
					clearInterval(a);
					boss_tempmod *= 2;
				}
			}

			function item_extra_9 ()
			{
				boss_tempmod /= 2;
				booster_countdown = 60;
				a = setInterval(function(){bstcountdown_boss()},1000);
			}

			function item_extra_10 ()
			{
				stun_boss(15);
			}

			function item_extra_11 ()
			{
				time -= 100;
			}

			function item_extra_12 ()
			{

			}

			function item_extra_13 ()
			{
				item_13_check = 1;
			}

			function item_extra_14 ()
			{
				item_14_check = 1;
			}

		</script>
		</br>
		<button onclick="bossdmg(10)">DAMAGE BOSS 10</button>
		<button onclick="studentdmg(10)">DAMAGE STUDENTS 10</button>

		</br>
		<button onclick="bossdmg(50)">DAMAGE BOSS 50</button>
		<button onclick="studentdmg(50)">DAMAGE STUDENTS 50</button>
	</body>


</html>
